var App=angular.module("App",[],function($httpProvider){$httpProvider.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",$httpProvider.defaults.headers.common.Accept="application/json, text/javascript, */*; q=0.01",$httpProvider.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"});App.controller("controller",function($scope,$element,$http){var action=$element.find("form").attr("action");$scope.formData={},$scope.result={},$scope.save=function(){$scope.formData.debug=!0,$http.post(action,$scope.formData).success(function(data){$scope.result=data.result})},$scope.save(),$scope.view=function(){$scope.formData.build=!0,$scope.save()}}),App.controller("MinMaxUrlController",function($scope){$scope.rows=[],$scope.min=1,$scope.max=5;var sum=function(){$scope.rows=[];var min=parseInt($scope.min),max=parseInt($scope.max);for(i=min;i<=max;i++)$scope.rows.push(i)};$scope.$watch("min",sum),$scope.$watch("max",sum)}),App.controller("submitController",function($scope,$element,$http){var action=$element.find("form").attr("action");$scope.row={},$scope.post=function(postdata,callback){$http.post(action,postdata).success(function(data){200==data.code?($scope.error={cls:"alert-info",msg:data.msg+(data.result?"("+angular.toJson(data.result)+")":"")},$scope.row={}):201==data.code?$scope.error={cls:"alert-danger",msg:data.msg}:alert(data),angular.isFunction(callback)&&callback(data.result)}).error(function(msg){alert("Err:"+msg)})},$scope.save=function($field,$value){var postdata=angular.copy($scope.row);$field&&(postdata[$field]=$value),$scope.post(postdata)},$scope.clear=function(){if(confirm("确定要删除数据吗？")){var postdata=angular.copy($scope.row);postdata.clear=!0,$scope.post(postdata)}}}),App.controller("FormController",function($scope,$element,$http){var action=$element.find("form").attr("action");$scope.num=5,$scope.level=1,$scope.row={},$scope.post=function(postdata,num,callback){postdata.num=num,$http.post(action,postdata,{async:!1}).success(function(data){200==data.code?$scope.error={cls:"alert-info",msg:data.msg+(data.result?"("+angular.toJson(data.result)+")":"")}:201==data.code?$scope.error={cls:"alert-danger",msg:data.msg+"("+num+")"}:alert(data),angular.isFunction(callback)&&callback(data.result)})},$scope.save=function(){!function(i,level,postdata){var __callee__=arguments.callee;i<=$scope.num&&$scope.post(postdata,i,function(data){if(level>1){var childdata=angular.copy(postdata);childdata.pid=data.id,childdata.name=data.name+"-",__callee__(1,level-1,childdata)}__callee__(i+1,level,postdata)})}(1,$scope.level,$scope.row)},$scope.clear=function(){if(confirm("确定要删除数据吗？")){var postdata=angular.copy($scope.row);postdata.clear=!0,$scope.post(postdata)}}});